{{/*
  Gallery List Template
  Renders all sub-galleries in content/gallery/ as a grid
*/}}
{{ define "main" }}
<link rel="stylesheet" href="/css/gallery-grid.css">

<nav aria-label="Breadcrumb" class="breadcrumb-nav" style="margin-bottom:1rem;">
  <ol style="list-style:none;display:flex;flex-wrap:wrap;padding:0;margin:0;">
    <li><a href="{{ .Site.Home.RelPermalink }}">Home</a></li>
    <li style="margin:0 0.5em;">/</li>
    <li><a href="{{ (site.GetPage "section" "gallery").RelPermalink }}">Gallery</a></li>
    {{ if ne .RelPermalink ((site.GetPage "section" "gallery").RelPermalink) }}
      <li style="margin:0 0.5em;">/</li>
      <li aria-current="page">{{ .Title }}</li>
    {{ end }}
  </ol>
</nav>
<div class="photo-gallery">
  {{ range .Pages }}
    {{ $p := . }}
    {{ with $p.Resources.Match "*.jpg" }}
      {{ $img := index . 0 }}
      {{ $thumb := $img.Fit "400x400" }}
      <a class="gallery-item" href="{{ $p.RelPermalink }}">
        <img class="gallery-thumb" src="{{ $thumb.RelPermalink }}" alt="{{ $p.Title }} thumbnail">
        <div class="gallery-title">{{ $p.Title }}</div>
      </a>
    {{ else }}
      <a class="gallery-item" href="{{ $p.RelPermalink }}">
        <div class="gallery-thumb" style="background:#eee;display:flex;align-items:center;justify-content:center;">No image</div>
        <div class="gallery-title">{{ $p.Title }}</div>
      </a>
    {{ end }}
  {{ end }}
</div>

{{ end }}